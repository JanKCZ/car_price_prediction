<!DOCTYPE html>
<html lang="cs">
<head>
	<meta charset="UTF8">
	<title>Car price prediction</title>
	<script type="text/javascript"
         src="{{ url_for('static', filename='data.js') }}">
    </script>
    <script type="text/javascript"
         src="{{ url_for('static', filename='methods.js') }}">
    </script>
</head>
<body>
	<header>
		<h1>
			Predikce cen automobilů
		</h1>
		<h3>
			S využitím neuronových sítí je umožněno odhadnout cenu automobilu
		</h3>
	</header>
	<main>
		<form>
			<table>
				<tr>
					<td>
						Výrobce automobilu : 
					</td>
					<td>
						<select
							id="car_brand_list">
							<option value="" disabled selected> -- jako první zvolte výrobce -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Model automobilu: 
					</td>
					<td>
						<select 
							id="car_model_list">
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Karoserie automobilu: 
					</td>
					<td>
						<select 
							id="car_type_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Výkon vozidla v kW:
					</td>
					<td>
						<input type="text" id="engine_power" name="engine_power" required minlength="1" maxlength="3" placeholder="například 90" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))">
					</td>
				</tr>
				<tr>
					<td>
						Obsah motoru v ccm:
					</td>
					<td>
						<input type="text" id="ccm" name="ccm" required minlength="1" maxlength="4" placeholder="například 1900" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))">
					</td>
				</tr>
				<tr>
					<td>
						Stav vozidla: 
					</td>
					<td>
						<select
						id="condition">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
							<option value="nové">Nové</option>
							<option value="předváděcí">Předváděcí</option>
							<option value="ojeté">Ojeté</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Servisní knížka: 
					</td>
					<td>
						<select
						id="book">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
							<option value="ano">Ano</option>
							<option value="ne">Ne</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Rok výroby vozidla (min 2010):
					</td>
					<td>
						<input type="text" id="year" name="year" required minlength="4" maxlength="4" placeholder="například 2015" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))">
					</td>
				</tr>
				<tr>
					<td>
						Počet najetých km:
					</td>
					<td>
						<input type="text" id="milage" name="milage" required minlength="1" maxlength="6" placeholder="například 150000" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))">
					</td>
				</tr>
				<tr>
					<td>
						Palivo: 
					</td>
					<td>
						<select
							id="car_fuel_list"> 
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Počet míst k sezení: 
					</td>
					<td>
						<select 
							id="n_ppl_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Počet airbagů: 
					</td>
					<td>
						<select 
							id="n_airbags_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Počet dveří: 
					</td>
					<td>
						<select 
							id="n_doors_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Klimatizace: 
					</td>
					<td>
						<select 
							id="air_condition_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Převodovka: 
					</td>
					<td>
						<select 
							id="transmission_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Země původu: 
					</td>
					<td>
						<select 
							id="country_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
						</select>
					</td>
				</tr>
				<tr>
					<td>
						Výbava: 
					</td>
					<td>
						<select 
							id="extras_list">
							<option disabled selected value > -- vyberte jednu z možností -- </option>
							<option value="1">"1 - 14 extras"</option>
							<option value="2">"15 - 29 extras"</option>
							<option value="3">"30 - 44 extras"</option>
							<option value="4">"45 - 59 extras"</option>
							<option value="5">"60 - 74 extras"</option>
							<option value="6">"75 - 89 extras"</option>
							<option value="7">"90 - 104 extras"</option>
							<option value="8">"105 - 119 extras"</option>
							<option value="9">"120 - 134 extras"</option>
							<option value="10">"135 and more extras"</option>
					</td>
				</tr>
				<tr>
					<td>----------</td>
				</tr>
				<tr>
					<td>
						Odhadovaná cena vozidla je:
					</td>
					<td>
						<div id="predicted_price"></div>
					</td>
				</tr>
			</table>
		</form>
	</main>
	<div class="login">
    <form action="{{ url_for('predict')}}"method="POST">
    	<!-- <input id = "param" type = "hidden" name = "param" value = "" /> -->
    	<input id = "car_brand_input" type = "hidden" name = "car_brand_input" value = "" />
    	<input id = "car_model_input" type = "hidden" name = "car_model_input" value = "" />
    	<input id = "car_type_input" type = "hidden" name = "car_type_input" value = "" />
    	<input id = "engine_power_input" type = "hidden" name = "engine_power_input" value = "" />
    	<input id = "ccm_input" type = "hidden" name = "ccm_input" value = "" />
    	<input id = "condition_input" type = "hidden" name = "condition_input" value = "" />
    	<input id = "service_book_input" type = "hidden" name = "service_book_input" value = "" />
    	<input id = "year_input" type = "hidden" name = "year_input" value = "" />
    	<input id = "milage_input" type = "hidden" name = "milage_input" value = "" />
    	<input id = "fuell_input" type = "hidden" name = "fuell_input" value = "" />
    	<input id = "n_ppl_input" type = "hidden" name = "n_ppl_input" value = "" />
    	<input id = "n_airbags_input" type = "hidden" name = "n_airbags_input" value = "" />
    	<input id = "n_doors_input" type = "hidden" name = "n_doors_input" value = "" />
    	<input id = "aircondition_input" type = "hidden" name = "aircondition_input" value = "" />
    	<input id = "transmission_input" type = "hidden" name = "transmission_input" value = "" />
    	<input id = "country_input" type = "hidden" name = "country_input" value = "" />
    	<input id = "extras_input" type = "hidden" name = "extras_input" value = "" />
        <button type="submit"
        	onclick = "passParametres()"
        	class="btn btn-primary btn-block btn-large">Predict</button>
    </form>
	</div>
	{{pred}}
</body>
	<script>
		//VARIABLES
		var car_brand
		var car_model

		//CAR BRAND and MODEL
		var car_brand_Object = Object.keys(car_brand_model_dict);
		var select_brand_list = document.getElementById("car_brand_list");
		for(index in car_brand_Object) {
   	 		select_brand_list.options[select_brand_list.options.length] = new Option(car_brand_Object[index], index);
		}

		var select_model_list = document.getElementById("car_model_list");

		function clear_list() {
			var i, L = select_model_list.options.length - 1;
		    for(i = L; i >= 0; i--) {
		      select_model_list.remove(i);
		   	}
		}

		select_brand_list.addEventListener("change", function() {
			car_brand = Object.keys(car_brand_model_dict)[select_brand_list.value];
			clear_list();
			display_car_models(car_brand);
		})

		function display_car_models(car_brand) {
			var car_model_Object = car_brand_model_dict[car_brand];
			for(index in car_model_Object) {
   	 			select_model_list.options[select_model_list.options.length] = new Option(car_model_Object[index], index);
			}
		}

		function load_data_to_list(elementID, data, sort) {
			var list = document.getElementById(elementID);
			for(var i = 0; i < data.length; i++) {
				if (sort == true) {
					var opt = data.sort()[i];
				    var el = document.createElement("option");
				    el.text = opt;
				    el.value = opt;
				    list.add(el);
				} else {
					var opt = data[i];
				    var el = document.createElement("option");
				    el.text = opt;
				    el.value = opt;
				    list.add(el);
				}	
			}
		}

		//FUEL
		load_data_to_list("car_fuel_list", fuell_data, true);

		//TRANSMISSION
		load_data_to_list("transmission_list", transmission_data, true);

		//AIRCONDITION
		load_data_to_list("air_condition_list", air_condition_data, true);

		//COUNTRY
		load_data_to_list("country_list", country_data, false);

		//CAR TYPE
		load_data_to_list("car_type_list", car_type_data, true);

		//DOORS
		load_data_to_list("n_doors_list", n_doors, true);

		//PPL
		load_data_to_list("n_ppl_list", n_ppl, true);

		//AIRBAGS
		load_data_to_list("n_airbags_list", n_airbags, false);
	</script>
</html>